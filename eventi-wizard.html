<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizza il Tuo Evento - Omnicore Service</title>
    <meta name="description" content="Configura il tuo evento perfetto con i migliori fornitori in Sardegna">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Wizard Container */
        .wizard-container {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding-top: 80px;
        }
        
        /* Main Wizard Content */
        .wizard-content {
            flex: 1;
            max-width: calc(100% - 400px);
            padding: 40px;
        }
        
        /* Wizard Card */
        .wizard-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            margin: 0 auto;
        }
        
        /* Progress Bar */
        .wizard-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .wizard-progress::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #e0e0e0;
            z-index: 0;
        }
        
        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            z-index: 1;
        }
        
        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }
        
        .progress-step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 4px solid #e0e0e0;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #999;
            transition: all 0.3s ease;
        }
        
        .progress-step.active .progress-step-circle {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .progress-step.completed .progress-step-circle {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
        }
        
        .progress-step-label {
            font-size: 12px;
            font-weight: 500;
            color: #666;
        }
        
        /* Wizard Steps */
        .wizard-step {
            display: none;
        }
        
        .wizard-step.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .wizard-step-title {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .wizard-step-subtitle {
            font-size: 16px;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        /* Event Type Selection */
        .event-types-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .event-type-card {
            background: #f8f9fa;
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .event-type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .event-type-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        .event-type-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .event-type-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Form Groups */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        /* Radio Options */
        .radio-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .radio-option {
            position: relative;
        }
        
        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }
        
        .radio-option label {
            display: block;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }
        
        .radio-option input[type="radio"]:checked + label {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        /* Checkbox Services */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .service-checkbox {
            position: relative;
        }
        
        .service-checkbox input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }
        
        .service-checkbox label {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .service-checkbox label i {
            margin-right: 10px;
            font-size: 20px;
            color: #667eea;
        }
        
        .service-checkbox input[type="checkbox"]:checked + label {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }
        
        /* Provider Selection */
        .provider-card {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .provider-card:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .provider-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
        }
        
        .provider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .provider-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .provider-rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .provider-rating i {
            color: #ffa726;
        }
        
        .provider-price {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }
        
        .provider-details {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
        }
        
        /* Wizard Buttons */
        .wizard-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 15px;
        }
        
        .btn-wizard {
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        .btn-wizard-prev {
            background: #ecf0f1;
            color: #2c3e50;
        }
        
        .btn-wizard-prev:hover {
            background: #bdc3c7;
        }
        
        .btn-wizard-next {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
        }
        
        .btn-wizard-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-wizard-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Cart Sidebar */
        .cart-sidebar {
            width: 400px;
            background: white;
            box-shadow: -5px 0 30px rgba(0,0,0,0.2);
            position: fixed;
            right: 0;
            top: 80px;
            bottom: 0;
            overflow-y: auto;
            padding: 30px;
            z-index: 100;
        }
        
        .cart-header {
            margin-bottom: 25px;
        }
        
        .cart-title {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .cart-event-badge {
            display: inline-block;
            padding: 5px 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .cart-event-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .cart-event-info-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .cart-event-info-item i {
            margin-right: 10px;
            color: #667eea;
            width: 20px;
        }
        
        .cart-event-info-item:last-child {
            margin-bottom: 0;
        }
        
        .cart-services-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .cart-service-item {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
        }
        
        .cart-service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .cart-service-name {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .cart-service-price {
            font-weight: 700;
            color: #667eea;
        }
        
        .cart-service-provider {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 10px;
        }
        
        .cart-service-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-cart-action {
            padding: 5px 12px;
            border: none;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-modify {
            background: #3498db;
            color: white;
        }
        
        .btn-remove {
            background: #e74c3c;
            color: white;
        }
        
        .cart-add-service {
            border: 2px dashed #bdc3c7;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            color: #7f8c8d;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .cart-add-service:hover {
            border-color: #667eea;
            color: #667eea;
        }
        
        .cart-summary {
            border-top: 2px solid #e0e0e0;
            padding-top: 20px;
            margin-top: 20px;
        }
        
        .cart-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .cart-summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }
        
        .cart-budget-alert {
            background: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cart-budget-alert.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .cart-actions {
            margin-top: 20px;
        }
        
        .btn-cart {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            font-family: 'Inter', sans-serif;
        }
        
        .btn-request-quote {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-request-quote:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-save-config {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .btn-email-config {
            background: #34495e;
            color: white;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .wizard-content {
                max-width: 100%;
                padding: 20px;
            }
            
            .cart-sidebar {
                display: none;
            }
            
            .wizard-card {
                padding: 30px 20px;
            }
            
            .event-types-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .form-grid,
            .radio-group,
            .services-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .event-types-grid {
                grid-template-columns: 1fr;
            }
            
            .wizard-step-title {
                font-size: 24px;
            }
            
            .wizard-buttons {
                flex-direction: column;
            }
            
            .btn-wizard {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header (same as homepage) -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1 onclick="window.location.href='index-justdial.html'" style="cursor: pointer;">Omnicore</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="index-justdial.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#"><i class="fas fa-phone"></i> Supporto</a></li>
            </ul>
            <div class="auth-buttons">
                <button class="btn btn-download-app">
                    <i class="fas fa-mobile-alt"></i> Download App
                </button>
                <div class="auth-buttons-group">
                    <button class="btn-login-small">
                        <i class="fas fa-user"></i> Login
                    </button>
                    <button class="btn-signup-small">
                        Sign Up
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Wizard Container -->
    <div class="wizard-container">
        <!-- Main Wizard Content -->
        <div class="wizard-content">
            <div class="wizard-card">
                <!-- Progress Bar -->
                <div class="wizard-progress">
                    <div class="progress-line" id="progressLine"></div>
                    <div class="progress-step active" data-step="1">
                        <div class="progress-step-circle">1</div>
                        <div class="progress-step-label">Tipo Evento</div>
                    </div>
                    <div class="progress-step" data-step="2">
                        <div class="progress-step-circle">2</div>
                        <div class="progress-step-label">Dettagli</div>
                    </div>
                    <div class="progress-step" data-step="3">
                        <div class="progress-step-circle">3</div>
                        <div class="progress-step-label">Servizi</div>
                    </div>
                    <div class="progress-step" data-step="4">
                        <div class="progress-step-circle">4</div>
                        <div class="progress-step-label">Fornitori</div>
                    </div>
                    <div class="progress-step" data-step="5">
                        <div class="progress-step-circle">5</div>
                        <div class="progress-step-label">Riepilogo</div>
                    </div>
                </div>

                <!-- Step 1: Event Type -->
                <div class="wizard-step active" data-step="1">
                    <h2 class="wizard-step-title">Che tipo di evento stai organizzando?</h2>
                    <p class="wizard-step-subtitle">Seleziona la categoria del tuo evento</p>
                    
                    <div class="event-types-grid">
                        <div class="event-type-card" data-event-type="matrimonio">
                            <div class="event-type-icon">💍</div>
                            <div class="event-type-name">Matrimonio</div>
                        </div>
                        <div class="event-type-card" data-event-type="battesimo">
                            <div class="event-type-icon">⛪</div>
                            <div class="event-type-name">Battesimo</div>
                        </div>
                        <div class="event-type-card" data-event-type="compleanno">
                            <div class="event-type-icon">🎂</div>
                            <div class="event-type-name">Compleanno</div>
                        </div>
                        <div class="event-type-card" data-event-type="aziendale">
                            <div class="event-type-icon">💼</div>
                            <div class="event-type-name">Evento Aziendale</div>
                        </div>
                        <div class="event-type-card" data-event-type="comunione">
                            <div class="event-type-icon">🕊️</div>
                            <div class="event-type-name">Comunione</div>
                        </div>
                        <div class="event-type-card" data-event-type="laurea">
                            <div class="event-type-icon">🎓</div>
                            <div class="event-type-name">Laurea</div>
                        </div>
                        <div class="event-type-card" data-event-type="anniversario">
                            <div class="event-type-icon">💕</div>
                            <div class="event-type-name">Anniversario</div>
                        </div>
                        <div class="event-type-card" data-event-type="altro">
                            <div class="event-type-icon">🎉</div>
                            <div class="event-type-name">Altro</div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Event Details -->
                <div class="wizard-step" data-step="2">
                    <h2 class="wizard-step-title">Dettagli dell'Evento</h2>
                    <p class="wizard-step-subtitle">Fornisci informazioni sul tuo evento</p>
                    
                    <div class="form-group">
                        <label class="form-label">Quante persone parteciperanno?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="guests" id="guests-20" value="1-20">
                                <label for="guests-20">1-20 persone</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="guests" id="guests-50" value="21-50">
                                <label for="guests-50">21-50 persone</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="guests" id="guests-100" value="51-100">
                                <label for="guests-100">51-100 persone</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="guests" id="guests-100plus" value="100+">
                                <label for="guests-100plus">100+ persone</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Data dell'Evento</label>
                            <input type="date" class="form-input" id="eventDate">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Luogo</label>
                            <select class="form-select" id="eventLocation">
                                <option value="">Seleziona città</option>
                                <option value="cagliari">Cagliari</option>
                                <option value="sassari">Sassari</option>
                                <option value="olbia">Olbia</option>
                                <option value="alghero">Alghero</option>
                                <option value="nuoro">Nuoro</option>
                                <option value="oristano">Oristano</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Budget Indicativo (opzionale)</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" name="budget" id="budget-5k" value="0-5000">
                                <label for="budget-5k">Fino a €5.000</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="budget" id="budget-10k" value="5000-10000">
                                <label for="budget-10k">€5.000 - €10.000</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="budget" id="budget-20k" value="10000-20000">
                                <label for="budget-20k">€10.000 - €20.000</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" name="budget" id="budget-20kplus" value="20000+">
                                <label for="budget-20kplus">€20.000+</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Services Selection -->
                <div class="wizard-step" data-step="3">
                    <h2 class="wizard-step-title">Quali servizi ti servono?</h2>
                    <p class="wizard-step-subtitle">Seleziona tutti i servizi necessari</p>
                    
                    <div class="services-grid">
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-location" value="location">
                            <label for="service-location">
                                <i class="fas fa-map-marker-alt"></i>
                                Location/Sala
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-catering" value="catering">
                            <label for="service-catering">
                                <i class="fas fa-utensils"></i>
                                Catering
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-photo" value="fotografo">
                            <label for="service-photo">
                                <i class="fas fa-camera"></i>
                                Fotografo/Video
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-music" value="musica">
                            <label for="service-music">
                                <i class="fas fa-music"></i>
                                Musicista/DJ
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-decor" value="decorazioni">
                            <label for="service-decor">
                                <i class="fas fa-paint-brush"></i>
                                Decorazioni
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-cake" value="torta">
                            <label for="service-cake">
                                <i class="fas fa-birthday-cake"></i>
                                Torta
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-planner" value="wedding-planner">
                            <label for="service-planner">
                                <i class="fas fa-clipboard-list"></i>
                                Wedding Planner
                            </label>
                        </div>
                        <div class="service-checkbox">
                            <input type="checkbox" id="service-animation" value="animazione">
                            <label for="service-animation">
                                <i class="fas fa-child"></i>
                                Animazione
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Provider Selection (dynamic based on selected services) -->
                <div class="wizard-step" data-step="4">
                    <h2 class="wizard-step-title">Scegli i Fornitori</h2>
                    <p class="wizard-step-subtitle">Seleziona i fornitori per ogni servizio</p>
                    
                    <div id="providersContainer">
                        <!-- This will be populated dynamically -->
                    </div>
                </div>

                <!-- Step 5: Summary -->
                <div class="wizard-step" data-step="5">
                    <h2 class="wizard-step-title">🎉 Configurazione Completata!</h2>
                    <p class="wizard-step-subtitle">Ecco il riepilogo del tuo evento</p>
                    
                    <div id="summaryContainer">
                        <!-- Summary will be populated here -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button class="btn-wizard-next" onclick="submitConfiguration()">
                            <i class="fas fa-paper-plane"></i> Richiedi Preventivi
                        </button>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="wizard-buttons">
                    <button class="btn-wizard btn-wizard-prev" onclick="previousStep()" id="prevBtn" style="display: none;">
                        <i class="fas fa-chevron-left"></i> Indietro
                    </button>
                    <button class="btn-wizard btn-wizard-next" onclick="nextStep()" id="nextBtn">
                        Avanti <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Cart Sidebar -->
        <div class="cart-sidebar" id="cartSidebar">
            <div class="cart-header">
                <h3 class="cart-title">Il Tuo Evento</h3>
                <div class="cart-event-badge" id="cartEventType">Seleziona evento</div>
            </div>
            
            <div class="cart-event-info" id="cartEventInfo">
                <div class="cart-event-info-item">
                    <i class="fas fa-calendar"></i>
                    <span id="cartDate">Seleziona data</span>
                </div>
                <div class="cart-event-info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="cartLocation">Seleziona luogo</span>
                </div>
                <div class="cart-event-info-item">
                    <i class="fas fa-users"></i>
                    <span id="cartGuests">Seleziona ospiti</span>
                </div>
            </div>
            
            <h4 class="cart-services-title">Servizi Selezionati:</h4>
            <div id="cartServicesContainer">
                <div class="cart-add-service">
                    <i class="fas fa-plus-circle"></i> Inizia selezionando i servizi
                </div>
            </div>
            
            <div class="cart-summary">
                <div class="cart-summary-item">
                    <span>Subtotale:</span>
                    <span id="cartSubtotal">€0</span>
                </div>
                <div class="cart-summary-item">
                    <span>IVA (22%):</span>
                    <span id="cartTax">€0</span>
                </div>
                <div class="cart-summary-total">
                    <span>TOTALE:</span>
                    <span id="cartTotal">€0</span>
                </div>
                
                <div class="cart-budget-alert" id="cartBudgetAlert" style="display: none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="cartBudgetText"></span>
                </div>
            </div>
            
            <div class="cart-actions">
                <button class="btn-cart btn-request-quote" onclick="submitConfiguration()">
                    <i class="fas fa-paper-plane"></i> Richiedi Preventivi
                </button>
                <button class="btn-cart btn-save-config" onclick="saveConfiguration()">
                    <i class="fas fa-save"></i> Salva Configurazione
                </button>
                <button class="btn-cart btn-email-config" onclick="emailConfiguration()">
                    <i class="fas fa-envelope"></i> Invia via Email
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script>
        // Wizard State
        let currentStep = 1;
        let eventData = {
            eventType: '',
            guests: '',
            date: '',
            location: '',
            budget: '',
            services: [],
            providers: {}
        };

        // Mock providers data
        const providersData = {
            location: [
                { id: 1, name: 'Villa dei Pini', rating: 4.8, price: 500, details: 'Giardino • Capienza 100+ • Parcheggio' },
                { id: 2, name: 'Agriturismo Sa Mandra', rating: 4.5, price: 350, details: 'Rustico • Capienza 80 • Vista Mare' },
                { id: 3, name: 'Hotel Regina Margherita', rating: 4.9, price: 600, details: 'Elegante • Capienza 150+ • Centro città' }
            ],
            catering: [
                { id: 1, name: 'Sapori di Sardegna', rating: 4.7, price: 25, details: '€25/persona • Cucina tradizionale • Menu personalizzabile' },
                { id: 2, name: 'Il Gusto Sardo', rating: 4.6, price: 22, details: '€22/persona • Specialità locali • Bio' },
                { id: 3, name: 'Catering Deledda', rating: 4.9, price: 30, details: '€30/persona • Alta cucina • Chef stellato' }
            ],
            fotografo: [
                { id: 1, name: 'Studio Fotografico Fois', rating: 5.0, price: 400, details: 'Foto + Video • Album incluso • Droni' },
                { id: 2, name: 'Foto Events Sardegna', rating: 4.8, price: 350, details: 'Fotoreportage • Editing professionale' },
                { id: 3, name: 'Click & Smile Studio', rating: 4.6, price: 300, details: 'Pacchetto base • 200+ foto' }
            ],
            musica: [
                { id: 1, name: 'DJ Marco Live', rating: 4.9, price: 300, details: 'Attrezzatura professionale • 4h' },
                { id: 2, name: 'The Sound Group', rating: 4.7, price: 400, details: 'Band live • Repertorio ampio' },
                { id: 3, name: 'Music Events', rating: 4.5, price: 250, details: 'DJ Set • Luci incluse' }
            ],
            decorazioni: [
                { id: 1, name: 'Fior di Sardegna', rating: 4.8, price: 200, details: 'Allestimento floreale completo' },
                { id: 2, name: 'Decor Dreams', rating: 4.6, price: 150, details: 'Palloncini • Centrotavola' },
                { id: 3, name: 'Arte & Decor', rating: 4.9, price: 300, details: 'Allestimento personalizzato • Premium' }
            ],
            torta: [
                { id: 1, name: 'Pasticceria Artigiana', rating: 5.0, price: 180, details: 'Torta 3 piani • Design personalizzato' },
                { id: 2, name: 'Dolce Vita Bakery', rating: 4.7, price: 150, details: 'Torta artigianale • Gusti classici' },
                { id: 3, name: 'Sweet Dreams', rating: 4.8, price: 200, details: 'Torta scultura • Alta pasticceria' }
            ],
            'wedding-planner': [
                { id: 1, name: 'Dream Wedding Planner', rating: 5.0, price: 1500, details: 'Coordinamento completo • Assistenza H24' },
                { id: 2, name: 'Event Pro Sardegna', rating: 4.8, price: 1200, details: 'Organizzazione full service' },
                { id: 3, name: 'Your Day Planner', rating: 4.7, price: 1000, details: 'Coordinamento giornata evento' }
            ],
            animazione: [
                { id: 1, name: 'Magic Party', rating: 4.9, price: 200, details: 'Animatori professionisti • 2h' },
                { id: 2, name: 'Fun Kids', rating: 4.6, price: 150, details: 'Giochi • Trucca bimbi' },
                { id: 3, name: 'Happy Events', rating: 4.8, price: 250, details: 'Animazione + Gonfiabili' }
            ]
        };

        // Event Type Selection
        document.querySelectorAll('.event-type-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.event-type-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                eventData.eventType = this.getAttribute('data-event-type');
                updateCart();
            });
        });

        // Navigation Functions
        function nextStep() {
            if (!validateStep(currentStep)) {
                return;
            }
            
            if (currentStep < 5) {
                currentStep++;
                updateWizard();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateWizard();
            }
        }

        function updateWizard() {
            // Update steps visibility
            document.querySelectorAll('.wizard-step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
            
            // Update progress
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
            
            // Update progress line
            const progressPercent = ((currentStep - 1) / 4) * 100;
            document.getElementById('progressLine').style.width = progressPercent + '%';
            
            // Update buttons
            document.getElementById('prevBtn').style.display = currentStep > 1 ? 'block' : 'none';
            document.getElementById('nextBtn').style.display = currentStep < 5 ? 'block' : 'none';
            
            // Special handling for step 4
            if (currentStep === 4) {
                loadProviders();
            }
            
            // Special handling for step 5
            if (currentStep === 5) {
                loadSummary();
            }
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    if (!eventData.eventType) {
                        alert('Seleziona un tipo di evento');
                        return false;
                    }
                    break;
                case 2:
                    const guests = document.querySelector('input[name="guests"]:checked');
                    const date = document.getElementById('eventDate').value;
                    const location = document.getElementById('eventLocation').value;
                    
                    if (!guests || !date || !location) {
                        alert('Compila tutti i campi obbligatori');
                        return false;
                    }
                    
                    eventData.guests = guests.value;
                    eventData.date = date;
                    eventData.location = location;
                    
                    const budget = document.querySelector('input[name="budget"]:checked');
                    if (budget) {
                        eventData.budget = budget.value;
                    }
                    
                    updateCart();
                    break;
                case 3:
                    const selectedServices = [];
                    document.querySelectorAll('.service-checkbox input:checked').forEach(checkbox => {
                        selectedServices.push(checkbox.value);
                    });
                    
                    if (selectedServices.length === 0) {
                        alert('Seleziona almeno un servizio');
                        return false;
                    }
                    
                    eventData.services = selectedServices;
                    updateCart();
                    break;
            }
            return true;
        }

        function loadProviders() {
            const container = document.getElementById('providersContainer');
            container.innerHTML = '';
            
            eventData.services.forEach(service => {
                const serviceSection = document.createElement('div');
                serviceSection.style.marginBottom = '30px';
                
                const serviceTitle = document.createElement('h3');
                serviceTitle.textContent = getServiceName(service);
                serviceTitle.style.marginBottom = '15px';
                serviceSection.appendChild(serviceTitle);
                
                const providers = providersData[service] || [];
                providers.forEach(provider => {
                    const providerCard = createProviderCard(provider, service);
                    serviceSection.appendChild(providerCard);
                });
                
                container.appendChild(serviceSection);
            });
        }

        function createProviderCard(provider, service) {
            const card = document.createElement('div');
            card.className = 'provider-card';
            card.onclick = () => selectProvider(provider, service, card);
            
            if (eventData.providers[service] && eventData.providers[service].id === provider.id) {
                card.classList.add('selected');
            }
            
            card.innerHTML = `
                <div class="provider-header">
                    <div class="provider-name">${provider.name}</div>
                    <div class="provider-rating">
                        <i class="fas fa-star"></i>
                        <span>${provider.rating}</span>
                    </div>
                </div>
                <div class="provider-price">€${provider.price}${service === 'catering' ? '/persona' : ''}</div>
                <div class="provider-details">${provider.details}</div>
            `;
            
            return card;
        }

        function selectProvider(provider, service, cardElement) {
            // Deselect all cards for this service
            cardElement.parentElement.querySelectorAll('.provider-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Select this card
            cardElement.classList.add('selected');
            
            // Save to eventData
            eventData.providers[service] = provider;
            
            // Update cart
            updateCart();
        }

        function getServiceName(service) {
            const names = {
                location: 'Location/Sala',
                catering: 'Catering',
                fotografo: 'Fotografo/Video',
                musica: 'Musicista/DJ',
                decorazioni: 'Decorazioni',
                torta: 'Torta',
                'wedding-planner': 'Wedding Planner',
                animazione: 'Animazione'
            };
            return names[service] || service;
        }

        function updateCart() {
            // Update event type badge
            const eventTypes = {
                matrimonio: 'Matrimonio 💍',
                battesimo: 'Battesimo ⛪',
                compleanno: 'Compleanno 🎂',
                aziendale: 'Evento Aziendale 💼',
                comunione: 'Comunione 🕊️',
                laurea: 'Laurea 🎓',
                anniversario: 'Anniversario 💕',
                altro: 'Evento 🎉'
            };
            document.getElementById('cartEventType').textContent = eventTypes[eventData.eventType] || 'Seleziona evento';
            
            // Update event info
            document.getElementById('cartDate').textContent = eventData.date || 'Seleziona data';
            document.getElementById('cartLocation').textContent = eventData.location || 'Seleziona luogo';
            document.getElementById('cartGuests').textContent = eventData.guests || 'Seleziona ospiti';
            
            // Update services container
            const servicesContainer = document.getElementById('cartServicesContainer');
            servicesContainer.innerHTML = '';
            
            let subtotal = 0;
            
            Object.keys(eventData.providers).forEach(service => {
                const provider = eventData.providers[service];
                let price = provider.price;
                
                // Calculate total for catering based on guests
                if (service === 'catering') {
                    const guestCount = getGuestCount(eventData.guests);
                    price = provider.price * guestCount;
                }
                
                subtotal += price;
                
                const serviceItem = document.createElement('div');
                serviceItem.className = 'cart-service-item';
                serviceItem.innerHTML = `
                    <div class="cart-service-header">
                        <div class="cart-service-name">${getServiceName(service)}</div>
                        <div class="cart-service-price">€${price}</div>
                    </div>
                    <div class="cart-service-provider">${provider.name}</div>
                    <div class="cart-service-actions">
                        <button class="btn-cart-action btn-modify" onclick="modifyService('${service}')">
                            <i class="fas fa-edit"></i> Modifica
                        </button>
                        <button class="btn-cart-action btn-remove" onclick="removeService('${service}')">
                            <i class="fas fa-trash"></i> Rimuovi
                        </button>
                    </div>
                `;
                servicesContainer.appendChild(serviceItem);
            });
            
            if (Object.keys(eventData.providers).length === 0) {
                servicesContainer.innerHTML = '<div class="cart-add-service"><i class="fas fa-plus-circle"></i> Nessun servizio selezionato</div>';
            }
            
            // Update summary
            const tax = subtotal * 0.22;
            const total = subtotal + tax;
            
            document.getElementById('cartSubtotal').textContent = '€' + subtotal.toFixed(0);
            document.getElementById('cartTax').textContent = '€' + tax.toFixed(0);
            document.getElementById('cartTotal').textContent = '€' + total.toFixed(0);
            
            // Update budget alert
            if (eventData.budget) {
                const budgetAlert = document.getElementById('cartBudgetAlert');
                const budgetMax = getBudgetMax(eventData.budget);
                
                if (budgetMax && total <= budgetMax) {
                    budgetAlert.style.display = 'flex';
                    budgetAlert.className = 'cart-budget-alert';
                    document.getElementById('cartBudgetText').textContent = `Sotto budget! Risparmi €${(budgetMax - total).toFixed(0)}`;
                } else if (budgetMax && total > budgetMax) {
                    budgetAlert.style.display = 'flex';
                    budgetAlert.className = 'cart-budget-alert warning';
                    document.getElementById('cartBudgetText').textContent = `Supera il budget di €${(total - budgetMax).toFixed(0)}`;
                }
            }
        }

        function getGuestCount(guestRange) {
            const ranges = {
                '1-20': 15,
                '21-50': 35,
                '51-100': 75,
                '100+': 120
            };
            return ranges[guestRange] || 50;
        }

        function getBudgetMax(budgetRange) {
            const ranges = {
                '0-5000': 5000,
                '5000-10000': 10000,
                '10000-20000': 20000,
                '20000+': null
            };
            return ranges[budgetRange];
        }

        function modifyService(service) {
            currentStep = 4;
            updateWizard();
        }

        function removeService(service) {
            delete eventData.providers[service];
            updateCart();
        }

        function loadSummary() {
            const container = document.getElementById('summaryContainer');
            container.innerHTML = `
                <div style="background: #f8f9fa; border-radius: 15px; padding: 30px; margin-bottom: 20px;">
                    <h3 style="margin-bottom: 20px;">📋 Dettagli Evento</h3>
                    <p><strong>Tipo:</strong> ${getEventTypeName(eventData.eventType)}</p>
                    <p><strong>Data:</strong> ${formatDate(eventData.date)}</p>
                    <p><strong>Luogo:</strong> ${eventData.location}</p>
                    <p><strong>Ospiti:</strong> ${eventData.guests} persone</p>
                </div>
                
                <div style="background: #f8f9fa; border-radius: 15px; padding: 30px;">
                    <h3 style="margin-bottom: 20px;">✅ Servizi & Fornitori</h3>
                    ${Object.keys(eventData.providers).map(service => {
                        const provider = eventData.providers[service];
                        let price = provider.price;
                        if (service === 'catering') {
                            price = provider.price * getGuestCount(eventData.guests);
                        }
                        return `
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; padding: 15px; background: white; border-radius: 10px;">
                                <div>
                                    <strong>${getServiceName(service)}</strong><br>
                                    <span style="color: #7f8c8d; font-size: 14px;">${provider.name}</span>
                                </div>
                                <div style="font-weight: 700; color: #667eea;">€${price}</div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        function getEventTypeName(type) {
            const names = {
                matrimonio: 'Matrimonio',
                battesimo: 'Battesimo',
                compleanno: 'Compleanno',
                aziendale: 'Evento Aziendale',
                comunione: 'Comunione',
                laurea: 'Laurea',
                anniversario: 'Anniversario',
                altro: 'Altro'
            };
            return names[type] || type;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('it-IT', { day: 'numeric', month: 'long', year: 'numeric' });
        }

        function submitConfiguration() {
            alert('🎉 Richiesta inviata con successo!\n\nI fornitori selezionati ti contatteranno a breve con i preventivi dettagliati.');
            // Here you would send data to backend
            console.log('Event Configuration:', eventData);
        }

        function saveConfiguration() {
            localStorage.setItem('omnicore_event_config', JSON.stringify(eventData));
            alert('✅ Configurazione salvata! Potrai riprenderla in qualsiasi momento.');
        }

        function emailConfiguration() {
            const subject = `Configurazione Evento - ${getEventTypeName(eventData.eventType)}`;
            const body = `Dettagli evento configurato su Omnicore:\n\nTipo: ${getEventTypeName(eventData.eventType)}\nData: ${eventData.date}\nLuogo: ${eventData.location}\nOspiti: ${eventData.guests}`;
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }

        // Initialize
        updateWizard();
    </script>
</body>
</html>
